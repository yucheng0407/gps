/**
 @Name：layer v3.1.0 Web弹层组件
 @Author：贤心
 @Site：http://layer.layui.com
 @License：MIT
	 zxh  修改适合I B P S平台的控件
     1、优化了弹窗iframe传值的。
     2、增加按钮图标、按钮样式等处理
     3、修改了alert，confirm等弹窗传值
     4、增加快捷键的支持，btn.hotKey,监听问题未能很好解决
     5、layer与原来的layui的冲突修改名字 laydialog
     6、修正 office控件被遮挡不住的问题
     7、紧急修复在最新版 Chrome（61.0.3163.79）下遮罩层出现的奇异花屏现象
 
 */!function(t,e){"use strict"
var i,a,n=t.layui&&layui.define,o={getPath:function(){var t=document.scripts,e=t[t.length-1],i=e.src
if(!e.getAttribute("merge"))return i.substring(0,i.lastIndexOf("/")+1)}(),config:{},end:{},minIndex:0,minLeft:[],btn:[{label:"&#x786E;&#x5B9A;"},{label:"&#x53D6;&#x6D88;"}],type:["dialog","page","iframe","loading","tips"],getStyle:function(e,i){var a=e.currentStyle?e.currentStyle:t.getComputedStyle(e,null)
return a[a.getPropertyValue?"getPropertyValue":"getAttribute"](i)},link:function(i,a,n){if(l.path){var s=document.getElementsByTagName("head")[0],c=document.createElement("link")
"string"==typeof a&&(n=a)
var r=(n||i).replace(/\.|\//g,""),d="layuicss-"+r,f=0
c.rel="stylesheet",c.href=l.path+i,c.id=d,document.getElementById(d)||s.appendChild(c),"function"==typeof a&&!function u(){return++f>80?t.console&&console.error("laydialog.css: Invalid"):(1989===parseInt(o.getStyle(document.getElementById(d),"width"))?a():setTimeout(u,100),e)}()}}},l={v:"3.1.0",ie:function(){var e=navigator.userAgent.toLowerCase()
return t.ActiveXObject||"ActiveXObject"in t?(e.match(/msie\s(\d+)/)||[])[1]||"11":!1}(),index:t.laydialog&&t.laydialog.v?1e5:0,path:o.getPath,config:function(t,e){return t=t||{},l.cache=o.config=i.extend({},o.config,t),l.path=o.config.path||l.path,"string"==typeof t.extend&&(t.extend=[t.extend]),o.config.path&&l.ready(),t.extend?(n?layui.addcss("modules/laydialog/"+t.extend):o.link("theme/"+t.extend),this):this},ready:function(t){var e="laydialog",i="",a=(n?"modules/laydialog/":"theme/")+"default/laydialog.css?v="+l.v+i
return n?layui.addcss(a,t,e):o.link(a,t,e),this},alert:function(){var t=arguments,a={},n={btn:[{label:"&#x786E;&#x5B9A;",iconCls:"btn btn-primary",hotkey:13,action:function(t,e){"function"==typeof t.config.callback&&t.config.callback(!0),l.close(e)}}],closeBtn:!1,callback:null}
return a="object"==typeof t[0]?i.extend(!0,n,t[0]):i.extend(!0,n,{content:t[0],callback:e!==t[1]?t[1]:null}),l.open(a)},confirm:function(){var t=arguments,e={},a={content:null,btn:[{label:"&#x786E;&#x5B9A;",iconCls:"btn btn-primary",hotkey:13,action:function(t,e){"function"==typeof t.config.callback&&t.config.callback(!0),l.close(e)}},{label:"&#x53D6;&#x6D88;",iconCls:"btn btn-default",hotkey:27,action:function(t,e){"function"==typeof t.config.callback&&t.config.callback(!1),l.close(e)}}],closeBtn:!1,callback:null}
if("object"==typeof t[0]){var n=t[0]
n.btn&&(a.btn[0].label=n.btn[0].label,a.btn[1].label=n.btn[1].label,n.btn=a.btn),e=i.extend({},a,n)}else{var o="&#x4FE1;&#x606F;",s=null,c=[{label:"&#x786E;&#x5B9A;",iconCls:"btn btn-primary",hotkey:13,action:function(t,e){"function"==typeof t.config.callback&&t.config.callback(!0),l.close(e)}},{label:"&#x53D6;&#x6D88;",iconCls:"btn btn-default",hotkey:27,action:function(t,e){"function"==typeof t.config.callback&&t.config.callback(!1),l.close(e)}}]
2==t.length&&("function"==typeof t[1]&&(s=t[1]),"string"==typeof t[1]&&(o=t[1])),3==t.length&&("function"==typeof t[1]&&(s=t[1]),"string"==typeof t[1]&&(o=t[1]),"function"==typeof t[2]&&(s=t[2])),4==t.length&&("function"==typeof t[1]&&(s=t[1]),"string"==typeof t[1]&&(o=t[1]),"function"==typeof t[2]&&(s=t[2]),t[3]&&(c=[{label:"&#x5426;",iconCls:"btn btn-primary",hotkey:27,action:function(t,e){"function"==typeof t.config.callback&&t.config.callback(!1),l.close(e)}},{label:"&#x662F;",iconCls:"btn btn-default",hotkey:13,action:function(t,e){"function"==typeof t.config.callback&&t.config.callback(!0),l.close(e)}}])),e=i.extend(!0,a,{content:t[0],callback:s,title:o,btn:c,closeBtn:!1})}return l.open(e)},msg:function(t,a,n){var s="function"==typeof a,r=o.config.skin,d=(r?r+" "+r+"-msg":"")||"layui-laydialog-msg",f=c.anim.length-1
return s&&(n=a),l.open(i.extend({content:t,time:3e3,shade:!1,skin:d,title:!1,closeBtn:!1,btn:!1,resize:!1,end:n},s&&!o.config.skin?{skin:d+" layui-laydialog-hui",anim:f}:function(){return a=a||{},(-1===a.icon||a.icon===e&&!o.config.skin)&&(a.skin=d+" "+(a.skin||"layui-laydialog-hui")),a}()))},load:function(t,e){return l.open(i.extend({type:3,icon:t||0,resize:!1},e))},tips:function(t,e,a){return l.open(i.extend({type:4,content:[t,e],closeBtn:!1,time:3e3,shade:!1,resize:!1,fixed:!1,maxWidth:210},a))}},s=function(t){var e=this
e.index=++l.index,e.config=i.extend({},e.config,o.config,t),document.body?e.creat():setTimeout(function(){e.creat()},30)}
s.pt=s.prototype
var c=["layui-laydialog",".layui-laydialog-title",".layui-laydialog-main",".layui-laydialog-dialog","layui-laydialog-iframe","layui-laydialog-content","layui-laydialog-btn","layui-laydialog-close"]
c.anim=["laydialog-anim-00","laydialog-anim-01","laydialog-anim-02","laydialog-anim-03","laydialog-anim-04","laydialog-anim-05","laydialog-anim-06"],s.pt.config={type:0,shade:.3,fixed:!0,move:c[1],title:"&#x4FE1;&#x606F;",offset:"auto",area:"auto",closeBtn:1,time:0,zIndex:19891014,maxWidth:360,anim:0,isOutAnim:!0,icon:-1,moveType:1,resize:!0,scrollbar:!0,tips:2,registeredButtonHotkeys:{}},s.pt.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"===t?e:3&e|8
return i.toString(16)})},s.pt.vessel=function(t,a){var n=this,l=n.index,s=n.config,r=s.zIndex+l,d="object"==typeof s.title,f=s.maxmin&&(1===s.type||2===s.type),u=s.title?'<div class="layui-laydialog-title" style="'+(d?s.title[1]:"")+'">'+(d?s.title[0]:s.title)+"</div>":""
return s.zIndex=r,a([s.shade?'<div class="layui-laydialog-shade" id="layui-laydialog-shade'+l+'" times="'+l+'" style="'+("z-index:"+(r-1)+"; ")+'"></div>':"",'<div class="'+c[0]+(" layui-laydialog-"+o.type[s.type])+(0!=s.type&&2!=s.type||s.shade?"":" layui-laydialog-border")+" "+(s.skin||"")+'" id="'+c[0]+l+'" type="'+o.type[s.type]+'" times="'+l+'" showtime="'+s.time+'" conType="'+(t?"object":"string")+'" style="z-index: '+r+"; width:"+s.area[0]+";height:"+s.area[1]+(s.fixed?"":";position:absolute;")+'">'+(t&&2!=s.type?"":u)+'<div id="'+(s.id||"")+'" class="layui-laydialog-content'+(0==s.type&&-1!==s.icon?" layui-laydialog-padding":"")+(3==s.type?" layui-laydialog-loading"+s.icon:"")+'">'+(0==s.type&&-1!==s.icon?'<i class="layui-laydialog-ico layui-laydialog-ico'+s.icon+'"></i>':"")+(1==s.type&&t?"":s.content||"")+'</div><span class="layui-laydialog-setwin">'+function(){var t=f?'<a class="layui-laydialog-min" href="javascript:;"><cite></cite></a><a class="layui-laydialog-ico layui-laydialog-max" href="javascript:;"></a>':""
return s.closeBtn&&(t+='<a class="layui-laydialog-ico '+c[7]+" "+c[7]+(s.title?s.closeBtn:4==s.type?"1":"2")+'" href="javascript:;"></a>'),t}()+"</span>"+(s.btn?function(){var t,i="",a=""
"string"==typeof s.btn&&(s.btn=[s.btn])
for(var o=0,l=s.btn.length;l>o;o++)a=s.btn[o].id?s.btn[o].id:n.newGuid()+"btn",t=s.btn[o].iconCls?s.btn[o].iconCls:0==o?"btn btn-primary":"btn btn-default",i+='<a id="'+a+'" class="'+c[6]+o+" "+t+(s.btn[o].hide?" hidden":"")+'">'+s.btn[o].label+"</a>",e!==s.btn[o].hotkey&&(s.registeredButtonHotkeys[s.btn[o].hotkey]=a)
return'<div class="'+c[6]+" layui-laydialog-btn-"+(s.btnAlign||"")+'">'+i+"</div>"}():"")+(s.resize?'<span class="layui-laydialog-resize"></span>':"")+"</div>"],u,i('<div class="layui-laydialog-move"></div>')),n},s.pt.creat=function(){var t=this,e=t.config,n=t.index,s=e.content,r="object"==typeof s,d=i("body")
if(!e.id||!i("#"+e.id)[0]){switch("string"==typeof e.area&&(e.area="auto"===e.area?["",""]:[e.area,""]),e.shift&&(e.anim=e.shift),6==l.ie&&(e.fixed=!1),e.type){case 0:e.btn="btn"in e?e.btn:o.btn[0],l.closeAll("dialog")
break
case 2:var s=e.content=r?e.content:[e.content||"http://www.bpmhome.cn","auto"]
e.content='<iframe scrolling="'+(e.content[1]||"auto")+'" allowtransparency="true" id="'+c[4]+n+'" name="'+c[4]+n+'" onload="this.className=\'\';" class="layui-laydialog-load" frameborder="0" src="'+e.content[0]+'"></iframe>'
break
case 3:delete e.title,delete e.closeBtn,-1===e.icon&&0===e.icon,l.closeAll("loading")
break
case 4:r||(e.content=[e.content,"body"]),e.follow=e.content[1],e.content=e.content[0]+'<i class="layui-laydialog-TipsG"></i>',delete e.title,e.tips="object"==typeof e.tips?e.tips:[e.tips,!0],e.tipsMore||l.closeAll("tips")}if(t.vessel(r,function(a,l,f){d.append(a[0]),r?function(){2==e.type||4==e.type?function(){i("body").append(a[1])}():function(){s.parents("."+c[0])[0]||(s.data("display",s.css("display")).show().addClass("layui-laydialog-wrap").wrap(a[1]),i("#"+c[0]+n).find("."+c[5]).before(l))}()}():d.append(a[1]),i(".layui-laydialog-move")[0]||d.append(o.moveElem=f),t.laydialogo=i("#"+c[0]+n),e.scrollbar||c.html.css("overflow","hidden").attr("laydialog-full",n)}).auto(n),i("#layui-laydialog-shade"+t.index).css({"background-color":e.shade[1]||"#000",opacity:e.shade[0]||e.shade}),i(document).off("keydown",o.enter).on("keydown",o.enter),t.laydialogo.on("keydown",function(t){i(document).off("keydown",o.enter)}),2==e.type&&6==l.ie&&t.laydialogo.find("iframe").attr("src",s[0]),4==e.type?t.tips():t.offset(),e.fixed&&a.on("resize",function(){t.offset(),(/^\d+%$/.test(e.area[0])||/^\d+%$/.test(e.area[1]))&&t.auto(n),4==e.type&&t.tips()}),e.time<=0||setTimeout(function(){l.close(t.index)},e.time),2==e.type){var f=i("#"+c[4]+n),u=f[0]
u.dialog=t,u.dialog.config=t.config,u.dialog.callback=t.config.callback,u.dialog.params=t.config.params,u.close=function(e){e||(e=t.index),l.close(e)}}if(t.move().back(),c.anim[e.anim]){var y="laydialog-anim "+c.anim[e.anim]
t.laydialogo.addClass(y).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){i(this).removeClass(y)})}e.isOutAnim&&t.laydialogo.data("isOutAnim",!0)}},s.pt.auto=function(t){var e=this,n=e.config,o=i("#"+c[0]+t)
""===n.area[0]&&n.maxWidth>0&&(l.ie&&l.ie<8&&n.btn&&o.width(o.innerWidth()),o.outerWidth()>n.maxWidth&&o.width(n.maxWidth))
var s=[o.innerWidth(),o.innerHeight()],r=o.find(c[1]).outerHeight()||0,d=o.find("."+c[6]).outerHeight()||0,f=function(t){t=o.find(t),t.height(s[1]-r-d-2*(0|parseFloat(t.css("padding-top"))))}
switch(n.type){case 2:f("iframe")
break
default:""===n.area[1]?n.maxHeight>0&&o.outerHeight()>n.maxHeight?(s[1]=n.maxHeight,f("."+c[5])):n.fixed&&s[1]>=a.height()&&(s[1]=a.height(),f("."+c[5])):f("."+c[5])}return e},s.pt.offset=function(){var t=this,e=t.config,i=t.laydialogo,n=[i.outerWidth(),i.outerHeight()],o="object"==typeof e.offset
t.offsetTop=(a.height()-n[1])/2,t.offsetLeft=(a.width()-n[0])/2,o?(t.offsetTop=e.offset[0],t.offsetLeft=e.offset[1]||t.offsetLeft):"auto"!==e.offset&&("t"===e.offset?t.offsetTop=0:"r"===e.offset?t.offsetLeft=a.width()-n[0]:"b"===e.offset?t.offsetTop=a.height()-n[1]:"l"===e.offset?t.offsetLeft=0:"lt"===e.offset?(t.offsetTop=0,t.offsetLeft=0):"lb"===e.offset?(t.offsetTop=a.height()-n[1],t.offsetLeft=0):"rt"===e.offset?(t.offsetTop=0,t.offsetLeft=a.width()-n[0]):"rb"===e.offset?(t.offsetTop=a.height()-n[1],t.offsetLeft=a.width()-n[0]):t.offsetTop=e.offset),e.fixed||(t.offsetTop=/%$/.test(t.offsetTop)?a.height()*parseFloat(t.offsetTop)/100:parseFloat(t.offsetTop),t.offsetLeft=/%$/.test(t.offsetLeft)?a.width()*parseFloat(t.offsetLeft)/100:parseFloat(t.offsetLeft),t.offsetTop+=a.scrollTop(),t.offsetLeft+=a.scrollLeft()),i.attr("minLeft")&&(t.offsetTop=a.height()-(i.find(c[1]).outerHeight()||0),t.offsetLeft=i.css("left")),i.css({top:t.offsetTop,left:t.offsetLeft})},s.pt.tips=function(){var t=this,e=t.config,n=t.laydialogo,o=[n.outerWidth(),n.outerHeight()],l=i(e.follow)
l[0]||(l=i("body"))
var s={width:l.outerWidth(),height:l.outerHeight(),top:l.offset().top,left:l.offset().left},r=n.find(".layui-laydialog-TipsG"),d=e.tips[0]
e.tips[1]||r.remove(),s.autoLeft=function(){s.left+o[0]-a.width()>0?(s.tipLeft=s.left+s.width-o[0],r.css({right:12,left:"auto"})):s.tipLeft=s.left},s.where=[function(){s.autoLeft(),s.tipTop=s.top-o[1]-10,r.removeClass("layui-laydialog-TipsB").addClass("layui-laydialog-TipsT").css("border-right-color",e.tips[1])},function(){s.tipLeft=s.left+s.width+10,s.tipTop=s.top,r.removeClass("layui-laydialog-TipsL").addClass("layui-laydialog-TipsR").css("border-bottom-color",e.tips[1])},function(){s.autoLeft(),s.tipTop=s.top+s.height+10,r.removeClass("layui-laydialog-TipsT").addClass("layui-laydialog-TipsB").css("border-right-color",e.tips[1])},function(){s.tipLeft=s.left-o[0]-10,s.tipTop=s.top,r.removeClass("layui-laydialog-TipsR").addClass("layui-laydialog-TipsL").css("border-bottom-color",e.tips[1])}],s.where[d-1](),1===d?s.top-(a.scrollTop()+o[1]+16)<0&&s.where[2]():2===d?a.width()-(s.left+s.width+o[0]+16)>0||s.where[3]():3===d?s.top-a.scrollTop()+s.height+o[1]+16-a.height()>0&&s.where[0]():4===d&&o[0]+16-s.left>0&&s.where[1](),n.find("."+c[5]).css({"background-color":e.tips[1],"padding-right":e.closeBtn?"30px":""}),n.css({left:s.tipLeft-(e.fixed?a.scrollLeft():0),top:s.tipTop-(e.fixed?a.scrollTop():0)})},s.pt.move=function(){var t=this,e=t.config,n=i(document),s=t.laydialogo,c=s.find(e.move),r=s.find(".layui-laydialog-resize"),d={}
return e.move&&c.css("cursor","move"),c.on("mousedown",function(t){t.preventDefault(),e.move&&(d.moveStart=!0,d.offset=[t.clientX-parseFloat(s.css("left")),t.clientY-parseFloat(s.css("top"))],o.moveElem.css("cursor","move").show())}),r.on("mousedown",function(t){t.preventDefault(),d.resizeStart=!0,d.offset=[t.clientX,t.clientY],d.area=[s.outerWidth(),s.outerHeight()],o.moveElem.css("cursor","se-resize").show()}),n.on("mousemove",function(i){if(d.moveStart){var n=i.clientX-d.offset[0],o=i.clientY-d.offset[1],c="fixed"===s.css("position")
if(i.preventDefault(),d.stX=c?0:a.scrollLeft(),d.stY=c?0:a.scrollTop(),!e.moveOut){var r=a.width()-s.outerWidth()+d.stX,f=a.height()-s.outerHeight()+d.stY
n<d.stX&&(n=d.stX),n>r&&(n=r),o<d.stY&&(o=d.stY),o>f&&(o=f)}s.css({left:n,top:o})}if(e.resize&&d.resizeStart){var n=i.clientX-d.offset[0],o=i.clientY-d.offset[1]
i.preventDefault(),l.style(t.index,{width:d.area[0]+n,height:d.area[1]+o}),d.isResize=!0,e.resizing&&e.resizing(s)}}).on("mouseup",function(t){d.moveStart&&(delete d.moveStart,o.moveElem.hide(),e.moveEnd&&e.moveEnd(s)),d.resizeStart&&(delete d.resizeStart,o.moveElem.hide())}),t},s.pt.back=function(){function t(){var t=s.cancel&&s.cancel(a.index,n)
t===!1||l.close(a.index)}var a=this,n=a.laydialogo,s=a.config
a.openlaydialog(),s.success&&(2==s.type?n.find("iframe").on("load",function(){s.success(n,a.index)}):s.success(n,a.index)),6==l.ie&&a.IE6(n),n.find("."+c[6]).children("a").on("click",function(t){var e=i(this).index(),n=s.btn[e].action
"function"==typeof n&&n.call(this,a,a.index,s.btn[e],t)}),n.find("."+c[7]).on("click",t),s.shadeClose&&i("#layui-laydialog-shade"+a.index).on("click",function(){l.close(a.index)}),n.find(".layui-laydialog-min").on("click",function(){var t=s.min&&s.min(n)
t===!1||l.min(a.index,s)}),n.find(".layui-laydialog-max").on("click",function(){i(this).hasClass("layui-laydialog-maxmin")?(l.restore(a.index),s.restore&&s.restore(n)):(l.full(a.index,s),setTimeout(function(){s.full&&s.full(n)},100))}),s.registeredButtonHotkeys&&i(document).on("keyup",{dialog:this},function(t){var a=t.data.dialog
if(a){var n=a.config
if(e!==n.registeredButtonHotkeys[t.which]){var o=i("#"+n.registeredButtonHotkeys[t.which])
!o.prop("disabled")&&o.focus().trigger("click")}}}),s.end&&(o.end[a.index]=s.end)},o.reselect=function(){i.each(i("select"),function(t,e){var a=i(this)
a.parents("."+c[0])[0]||1==a.attr("laydialog")&&i("."+c[0]).length<1&&a.removeAttr("laydialog").show(),a=null})},s.pt.IE6=function(t){i("select").each(function(t,e){var a=i(this)
a.parents("."+c[0])[0]||"none"===a.css("display")||a.attr({laydialog:"1"}).hide(),a=null})},s.pt.openlaydialog=function(){var t=this
l.zIndex=t.config.zIndex,l.setTop=function(t){var e=function(){l.zIndex++,t.css("z-index",l.zIndex+1)}
return l.zIndex=parseInt(t[0].style.zIndex),t.on("mousedown",e),l.zIndex}},o.record=function(t){var e=[t.width(),t.height(),t.position().top,t.position().left+parseFloat(t.css("margin-left"))]
t.find(".layui-laydialog-max").addClass("layui-laydialog-maxmin"),t.attr({area:e})},o.rescollbar=function(t){c.html.attr("laydialog-full")==t&&(c.html[0].style.removeProperty?c.html[0].style.removeProperty("overflow"):c.html[0].style.removeAttribute("overflow"),c.html.removeAttr("laydialog-full"))},t.laydialog=l,l.getChildFrameWindow=function(t){return t=t||i("."+c[4]).attr("times"),i("#"+c[0]+t).find("iframe")[0].contentWindow},l.getChildFrame=function(t,e){return e=e||i("."+c[4]).attr("times"),i("#"+c[0]+e).find("iframe").contents().find(t)},l.getFrameIndex=function(t){return i("#"+t).parents("."+c[4]).attr("times")},l.iframeAuto=function(t){if(t){var e=l.getChildFrame("html",t).outerHeight(),a=i("#"+c[0]+t),n=a.find(c[1]).outerHeight()||0,o=a.find("."+c[6]).outerHeight()||0
a.css({height:e+n+o}),a.find("iframe").css({height:e})}},l.iframeSrc=function(t,e){i("#"+c[0]+t).find("iframe").attr("src",e)},l.style=function(t,e,a){var n=i("#"+c[0]+t),l=n.find(".layui-laydialog-content"),s=n.attr("type"),r=n.find(c[1]).outerHeight()||0,d=n.find("."+c[6]).outerHeight()||0
n.attr("minLeft")
s!==o.type[3]&&s!==o.type[4]&&(a||(parseFloat(e.width)<=260&&(e.width=260),parseFloat(e.height)-r-d<=64&&(e.height=64+r+d)),n.css(e),d=n.find("."+c[6]).outerHeight(),s===o.type[2]?n.find("iframe").css({height:parseFloat(e.height)-r-d}):l.css({height:parseFloat(e.height)-r-d-parseFloat(l.css("padding-top"))-parseFloat(l.css("padding-bottom"))}))},l.min=function(t,e){var n=i("#"+c[0]+t),s=n.find(c[1]).outerHeight()||50,r=n.attr("minLeft")||181*o.minIndex+"px",d=n.css("position")
o.record(n),o.minLeft[0]&&(r=o.minLeft[0],o.minLeft.shift()),n.attr("position",d),l.style(t,{width:180,height:s,left:r,top:a.height()-s,position:"fixed",overflow:"hidden"},!0),n.find(".layui-laydialog-min").hide(),"page"===n.attr("type")&&n.find(c[4]).hide(),o.rescollbar(t),n.attr("minLeft")||o.minIndex++,n.attr("minLeft",r)},l.restore=function(t){var e=i("#"+c[0]+t),a=e.attr("area").split(",")
e.attr("type")
l.style(t,{width:parseFloat(a[0]),height:parseFloat(a[1]),top:parseFloat(a[2]),left:parseFloat(a[3]),position:e.attr("position"),overflow:"visible"},!0),e.find(".layui-laydialog-max").removeClass("layui-laydialog-maxmin"),e.find(".layui-laydialog-min").show(),"page"===e.attr("type")&&e.find(c[4]).show(),o.rescollbar(t)},l.full=function(t){var e,n=i("#"+c[0]+t)
o.record(n),c.html.attr("laydialog-full")||c.html.css("overflow","hidden").attr("laydialog-full",t),clearTimeout(e),e=setTimeout(function(){var e="fixed"===n.css("position")
l.style(t,{top:e?0:a.scrollTop(),left:e?0:a.scrollLeft(),width:a.width(),height:a.height()},!0),n.find(".layui-laydialog-min").hide()},100)},l.title=function(t,e){var a=i("#"+c[0]+(e||l.index)).find(c[1])
a.html(t)},l.close=function(t){var e=i("#"+c[0]+t),a=e.attr("type"),n="laydialog-anim-close"
if(e[0]){var s="layui-laydialog-wrap",r=function(){if(a===o.type[1]&&"object"===e.attr("conType")){e.children(":not(."+c[5]+")").remove()
for(var n=e.find("."+s),l=0;2>l;l++)n.unwrap()
n.css("display",n.data("display")).removeClass(s)}else{if(a===o.type[2])try{var r=i("#"+c[4]+t)[0]
r.contentWindow.document.write(""),r.contentWindow.close(),e.find("."+c[5])[0].removeChild(r)}catch(d){}e[0].innerHTML="",e.remove()}"function"==typeof o.end[t]&&o.end[t](),delete o.end[t]
try{i("#laydialog_iframe"+c[4]+t).remove()}catch(d){}}
e.data("isOutAnim")&&e.addClass("laydialog-anim "+n),i("#layui-laydialog-moves, #layui-laydialog-shade"+t).remove(),6==l.ie&&o.reselect(),o.rescollbar(t),e.attr("minLeft")&&(o.minIndex--,o.minLeft.push(e.attr("minLeft"))),l.ie&&l.ie<10||!e.data("isOutAnim")?r():setTimeout(function(){r()},200)}},l.closeAll=function(t){i.each(i("."+c[0]),function(){var e=i(this),a=t?e.attr("type")===t:1
a&&l.close(e.attr("times")),a=null})}
var r=l.cache||{},d=function(t){return r.skin?" "+r.skin+" "+r.skin+"-"+t:""}
l.prompt=function(t,e){var n=""
if(t=t||{},"function"==typeof t&&(e=t),t.area){var o=t.area
n='style="width: '+o[0]+"; height: "+o[1]+';"',delete t.area}var s,c=2==t.formType?'<textarea class="layui-laydialog-input"'+n+">"+(t.value||"")+"</textarea>":function(){return'<input type="'+(1==t.formType?"password":"text")+'" class="layui-laydialog-input" value="'+(t.value||"")+'">'}(),r=t.success
return delete t.success,l.open(i.extend({type:1,btn:[{label:"&#x786E;&#x5B9A;",iconCls:"btn btn-primary",action:function(t,e){t.config.yes(e)}},{label:"&#x53D6;&#x6D88;",iconCls:"btn btn-default",action:function(t,e){"function"==typeof t.config.callback&&t.config.callback(!1),l.close(e)}}],content:c,skin:"layui-laydialog-prompt"+d("prompt"),maxWidth:a.width(),success:function(t){s=t.find(".layui-laydialog-input"),s.focus(),"function"==typeof r&&r(t)},resize:!1,yes:function(i){var a=s.val()
""===a?s.focus():a.length>(t.maxlength||500)?l.tips("&#x6700;&#x591A;&#x8F93;&#x5165;"+(t.maxlength||500)+"&#x4E2A;&#x5B57;&#x6570;",s,{tips:1}):e&&e(a,i,s)}},t))},l.tab=function(t){t=t||{}
var e=t.tab||{},a="layui-this",n=t.success
return delete t.success,l.open(i.extend({type:1,skin:"layui-laydialog-tab"+d("tab"),resize:!1,title:function(){var t=e.length,i=1,n=""
if(t>0)for(n='<span class="'+a+'">'+e[0].title+"</span>";t>i;i++)n+="<span>"+e[i].title+"</span>"
return n}(),content:'<ul class="layui-laydialog-tabmain">'+function(){var t=e.length,i=1,n=""
if(t>0)for(n='<li class="layui-laydialog-tabli '+a+'">'+(e[0].content||"no content")+"</li>";t>i;i++)n+='<li class="layui-laydialog-tabli">'+(e[i].content||"no  content")+"</li>"
return n}()+"</ul>",success:function(e){var o=e.find(".layui-laydialog-title").children(),l=e.find(".layui-laydialog-tabmain").children()
o.on("mousedown",function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0
var n=i(this),o=n.index()
n.addClass(a).siblings().removeClass(a),l.eq(o).show().siblings().hide(),"function"==typeof t.change&&t.change(o)}),"function"==typeof n&&n(e)}},t))},l.photos=function(a,n,o){function s(t,i,a){var n=new Image
return n.src=t,n.complete?i(n):(n.onload=function(){n.onload=null,i(n)},n.onerror=function(t){n.onerror=null,a(t)},e)}var c={}
if(a=a||{},a.photos){var r=a.photos.constructor===Object,f=r?a.photos:{},u=f.data||[],y=f.start||0
c.imgIndex=(0|y)+1,a.img=a.img||"img"
var g=a.success
if(delete a.success,r){if(0===u.length)return l.msg("&#x6CA1;&#x6709;&#x56FE;&#x7247;")}else{var p=i(a.photos),h=function(){u=[],p.find(a.img).each(function(t){var e=i(this)
e.attr("laydialog-index",t),u.push({alt:e.attr("alt"),pid:e.attr("laydialog-pid"),src:e.attr("laydialog-src")||e.attr("src"),thumb:e.attr("src")})})}
if(h(),0===u.length)return
if(n||p.on("click",a.img,function(){var t=i(this),e=t.attr("laydialog-index")
l.photos(i.extend(a,{photos:{start:e,data:u,tab:a.tab},full:a.full}),!0),h()}),!n)return}c.imgprev=function(t){c.imgIndex--,c.imgIndex<1&&(c.imgIndex=u.length),c.tabimg(t)},c.imgnext=function(t,e){c.imgIndex++,c.imgIndex>u.length&&(c.imgIndex=1,e)||c.tabimg(t)},c.keyup=function(t){if(!c.end){var e=t.keyCode
t.preventDefault(),37===e?c.imgprev(!0):39===e?c.imgnext(!0):27===e&&l.close(c.index)}},c.tabimg=function(t){return u.length<=1?e:(f.start=c.imgIndex-1,l.close(c.index),l.photos(a,!0,t))},c.event=function(){c.bigimg.hover(function(){c.imgsee.show()},function(){c.imgsee.hide()}),c.bigimg.find(".layui-laydialog-imgprev").on("click",function(t){t.preventDefault(),c.imgprev()}),c.bigimg.find(".layui-laydialog-imgnext").on("click",function(t){t.preventDefault(),c.imgnext()}),i(document).on("keyup",c.keyup)},c.loadi=l.load(1,{shade:"shade"in a?!1:.9,scrollbar:!1}),s(u[y].src,function(e){l.close(c.loadi),c.index=l.open(i.extend({type:1,id:"layui-laydialog-photos",area:function(){var n=[e.width,e.height],o=[i(t).width()-100,i(t).height()-100]
if(!a.full&&(n[0]>o[0]||n[1]>o[1])){var l=[n[0]/o[0],n[1]/o[1]]
l[0]>l[1]?(n[0]=n[0]/l[0],n[1]=n[1]/l[0]):l[0]<l[1]&&(n[0]=n[0]/l[1],n[1]=n[1]/l[1])}return[n[0]+"px",n[1]+"px"]}(),title:!1,shade:.9,shadeClose:!0,closeBtn:!1,move:".layui-laydialog-phimg img",moveType:1,scrollbar:!1,moveOut:!0,isOutAnim:!1,skin:"layui-laydialog-photos"+d("photos"),content:'<div class="layui-laydialog-phimg"><img src="'+u[y].src+'" alt="'+(u[y].alt||"")+'" laydialog-pid="'+u[y].pid+'"><div class="layui-laydialog-imgsee">'+(u.length>1?'<span class="layui-laydialog-imguide"><a href="javascript:;" class="layui-laydialog-iconext layui-laydialog-imgprev"></a><a href="javascript:;" class="layui-laydialog-iconext layui-laydialog-imgnext"></a></span>':"")+'<div class="layui-laydialog-imgbar" style="display:'+(o?"block":"")+'"><span class="layui-laydialog-imgtit"><a href="javascript:;">'+(u[y].alt||"")+"</a><em>"+c.imgIndex+"/"+u.length+"</em></span></div></div></div>",success:function(t,e){c.bigimg=t.find(".layui-laydialog-phimg"),c.imgsee=t.find(".layui-laydialog-imguide,.layui-laydialog-imgbar"),c.event(t),a.tab&&a.tab(u[y],t),"function"==typeof g&&g(t)},end:function(){c.end=!0,i(document).off("keyup",c.keyup)}},a))},function(){l.close(c.loadi),l.msg("&#x5F53;&#x524D;&#x56FE;&#x7247;&#x5730;&#x5740;&#x5F02;&#x5E38;<br>&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x4E0B;&#x4E00;&#x5F20;&#xFF1F;",{time:3e4,btn:["&#x4E0B;&#x4E00;&#x5F20;","&#x4E0D;&#x770B;&#x4E86;"],yes:function(){u.length>1&&c.imgnext(!0,!0)}})})}},o.run=function(e){i=e,a=i(t),c.html=i("html"),l.open=function(t){var e=new s(t)
return e.index}},t.layui&&layui.define?(l.ready(),layui.define("jquery",function(e){l.path=layui.cache.dir,o.run(layui.$),t.laydialog=l,e("laydialog",l)})):"function"==typeof define&&define.amd?define(["jquery"],function(){return o.run(t.jQuery),l}):function(){o.run(t.jQuery),l.ready()}()}(window)
