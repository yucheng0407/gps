/*!
 * @copyright &copy; Kartik Visweswaran, Krajee.com, 2014 - 2017
 * @version 1.3.3
 *
 * Bootstrap Tabs Extended - Extended Bootstrap Tabs with ability to align tabs 
 * in multiple ways, add borders, rotated titles, and more.
 *
 * For more JQuery/Bootstrap plugins and demos visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 * zxh 修改iframe的支持
 */
!function(t){"use strict"
"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function(t){"use strict"
var e=function(e,a){return null===e||void 0===e||0===e.length||a&&""===t.trim(e)},a=function(e,a){var s=this
s.$element=t(e),s.init(a),s.listen()}
a.prototype={constructor:a,init:function(a){var s=this,i=s.$element
t.each(a,function(t,e){s[t]=e}),s.initCache(),s.enableCache=!!s.enableCache,e(s.addCss)||i.hasClass(s.addCss)||i.addClass(s.addCss),s.$pane=i.find(".tab-pane.active"),s.$content=i.find(".tab-content"),s.$tabs=i.find(".nav-tabs"),s.isVertical=i.hasClass("tabs-left")||i.hasClass("tabs-right"),s.isVerticalSide=s.isVertical&&i.hasClass("tab-sideways"),s.isVertical&&s.$content.css("min-height",s.$tabs.outerHeight()+1+"px")},setTitle:function(a){var s=this,i=t.trim(a.text()),n=s.isVertical,r=e(a.data("maxTitleLength"))?s.maxTitleLength:a.data("maxTitleLength")
n&&i.length>r-2&&e(a.attr("title"))&&a.attr("title",i)},listen:function(){var a=this,s=a.$element,i=s.data().flexheight?s.data().flexheight:60
s.find(".nav-tabs li.disabled").each(function(){t(this).find('[data-toggle="tab"]').removeAttr("data-toggle")}),s.find('.nav-tabs li [data-toggle="dropdown"]').each(function(){a.setTitle(t(this))}),s.find('.nav-tabs li [data-toggle="tab"]').each(function(){var s=t(this),n=s.closest("li"),r=s.attr("data-iframe")
s.attr("data-url")
n.removeAttr("data-toggle"),a.setTitle(s),s.on("click",function(r){if(n.hasClass("disabled"))return void r.preventDefault()
var c,l=t(this).attr("data-url"),o=this.hash,d=l+o,h=t(this).attr("data-iframe")
if(e(l)||a.enableCache&&a.cache.exist(d))return void s.trigger("tabsX:click")
r.preventDefault()
var u=t(o),f=t(this),b=f,g=t(this).attr("data-loading-class")||"ibps-tab-loading",m=f.closest(".dropdown"),p=a.successCallback[o]||null,v=a.errorCallback[o]||null
if(e(m.attr("class"))||(b=m.find(".dropdown-toggle")),h){var C=t(window).height()-i,x='<div class="tabx-body"><iframe style="width:100%;height:'+C+'px;"  class="'+g+'" frameborder="0" src="'+l+'"></iframe></div>'
u.html(x),f.tab("show"),b.removeClass(g),a.enableCache&&a.cache.set(d),p&&"function"==typeof p&&p(data,status,jqXHR)}else c=t.extend(!0,{},{type:"post",dataType:"json",url:l,beforeSend:function(t,e){u.html("<br><br><br>"),b.removeClass(g).addClass(g),s.trigger("tabsX:beforeSend",[t,e])},success:function(t,e,i){setTimeout(function(){u.html(t),f.tab("show"),b.removeClass(g),a.enableCache&&a.cache.set(d),p&&"function"==typeof p&&p(t,e,i),s.trigger("tabsX:success",[t,e,i])},300)},error:function(t,e,a){v&&"function"==typeof v&&v(t,e,a),s.trigger("tabsX:error",[t,e,a])},complete:function(t,e){s.trigger("tabsX:click",[t,e])}},a.ajaxSettings),t.ajax(c)}),n.is(".active")&&r&&s.trigger("click")})},initCache:function(){var t=this,e=parseFloat(t.cacheTimeout)
isNaN(e)&&(e=0),t.cache={data:{},create:function(){return(new Date).getTime()},exist:function(a){return!!t.cache.data[a]&&t.cache.create()-t.cache.data[a]<e},set:function(e){t.cache.data[e]=t.cache.create()}}},flushCache:function(){var t=this
t.cache.data={}}},t.fn.tabsX=function(e){var s=Array.apply(null,arguments),i=[]
switch(s.shift(),this.each(function(){var n=t(this),r=n.data("tabsX"),c="object"==typeof e&&e
r||(r=new a(this,t.extend(!0,{},t.fn.tabsX.defaults,c,t(this).data())),n.data("tabsX",r)),"string"==typeof e&&i.push(r[e].apply(r,s))}),i.length){case 0:return this
case 1:return i[0]
default:return i}},t.fn.tabsX.defaults={enableCache:!0,cacheTimeout:3e5,maxTitleLength:9,ajaxSettings:{},successCallback:{},errorCallback:{},addCss:"tabs-krajee"},t.fn.tabsX.Constructor=a,t(document).on("ready",function(){t(".tabs-x").tabsX({})})})
